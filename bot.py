import asyncio
import logging
from aiogram import Bot, Dispatcher, types
from aiogram.types import Message, ReplyKeyboardMarkup, KeyboardButton, InlineKeyboardMarkup, InlineKeyboardButton, ReplyKeyboardRemove
from aiogram.filters import Command

# üîê –¢–æ–∫–µ–Ω –±–æ—Ç–∞
TOKEN = "7337118484:AAGTyLOR9SBCOtolh1Skm4n7AIELSU7utZc"

bot = Bot(token=TOKEN)
dp = Dispatcher()

# üîπ –ö–Ω–æ–ø–∫–∏
btn_what_happened = KeyboardButton(text="–ß—Ç–æ –∂–µ —Å–ª—É—á–∏–ª–æ—Å—å?")
btn_who_is_she = KeyboardButton(text="–ö—Ç–æ –∂–µ –æ–Ω–∞?")
btn_how_help = KeyboardButton(text="–ß–µ–º —è –º–æ–≥—É –ø–æ–º–æ—á—å?")

# üîπ –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã
kb_what_happened = ReplyKeyboardMarkup(keyboard=[[btn_what_happened]], resize_keyboard=True)
kb_who_is_she = ReplyKeyboardMarkup(keyboard=[[btn_who_is_she]], resize_keyboard=True)
kb_how_help = ReplyKeyboardMarkup(keyboard=[[btn_how_help]], resize_keyboard=True)

# üîπ –ö–Ω–æ–ø–∫–∞ "–í–æ–π—Ç–∏ –≤ –ø–æ—Ä—Ç–∞–ª"
portal_button = InlineKeyboardMarkup(
    inline_keyboard=[[InlineKeyboardButton(text="–í–æ–π—Ç–∏ –≤ –ø–æ—Ä—Ç–∞–ª", url="https://t.me/+SJW_MsOMcBkwM2Uy")]]
)

# üîπ –¢–µ–∫—Å—Ç—ã
story_part_1 = """üí´ –í —Å–∞–º–æ–º —Å–µ—Ä–¥—Ü–µ –í–µ–ª–∏–∫–æ–≥–æ –¶–∏–∫–ª–∞, –Ω–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–∏ –ø—Ä–æ—à–ª–æ–≥–æ –∏ –±—É–¥—É—â–µ–≥–æ, —Ä–∞—Å–∫–∏–Ω—É–ª–æ—Å—å –ö–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–æ –ë–ª–∞–∂–µ–Ω—Å—Ç–≤–æ. –ó–¥–µ—Å—å –ª—é–¥–∏ –ø—Ä–µ–±—ã–≤–∞–ª–∏ –≤ –≥–∞—Ä–º–æ–Ω–∏–∏ —Å –ü–æ—Ç–æ–∫–æ–º, –≤—Å—ë —Ç–µ–∫–ª–æ –≤ —Ä–∏—Ç–º–µ —Å–æ–ª–Ω–µ—á–Ω–æ–≥–æ –∫—Ä—É–≥–∞, –∏ –∫–∞–∂–¥—ã–π –∑–Ω–∞–ª —Å–≤–æ—é –∏—Å—Ç–∏–Ω–Ω—É—é –ø—Ä–∏—Ä–æ–¥—É. –û–Ω–∏ –∂–∏–ª–∏ –≤ —Å–æ–∑–µ—Ä—Ü–∞–Ω–∏–∏, —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–µ –∏ —Ä–∞–¥–æ—Å—Ç–∏, –≤–µ–¥—å –ì–µ–Ω–Ω—ã–µ –ö–ª—é—á–∏ —Å–∏—è–ª–∏ –≤ –∏—Ö —Å–µ—Ä–¥—Ü–∞—Ö, –æ—Ç–∫—Ä—ã–≤–∞—è –¥–≤–µ—Ä–∏ –∫ –Ω–æ–≤—ã–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º.

–ù–æ —Ä–∞–∑ –≤ –≥–æ–¥ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ –Ω–µ—á—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ–µ - –æ—Ç–∫—Ä—ã–≤–∞–ª–∏—Å—å –í—Ä–∞—Ç–∞ –ù–æ–≤–æ–≥–æ –¶–∏–∫–ª–∞. –°–æ–ª–Ω—Ü–µ –≤—Ö–æ–¥–∏–ª–æ –≤ 41-–µ –í—Ä–∞—Ç–∞, –æ—Ç–∫—Ä—ã–≤–∞—è –ø–µ—Ä–µ–¥ —á–µ–ª–æ–≤–µ–∫–æ–º –≤–∏–¥–µ–Ω–∏–µ —Å–≤–æ–µ–π —Å—É–¥—å–±—ã –Ω–∞ –≥—Ä—è–¥—É—â–∏–π –≥–æ–¥.

–®–µ—Å—Ç—å –¥–Ω–µ–π —à–ª–æ —ç—Ç–æ –í–æ–ª—à–µ–±–Ω–æ–µ –ü–æ–≥—Ä—É–∂–µ–Ω–∏–µ, –∏ –∫–∞–∂–¥—ã–π –∏–∑ –¥–Ω–µ–π –ø–æ–∫–∞–∑—ã–≤–∞–ª –Ω–æ–≤—É—é —á–∞—Å—Ç—å –∫–∞—Ä—Ç—ã —Å—É–¥—å–±—ã, –Ω–∞–ø—Ä–∞–≤–ª—è—è —Å—Ç—Ä–∞–Ω–Ω–∏–∫–æ–≤ –Ω–∞ –∏—Ö –∏—Å—Ç–∏–Ω–Ω—ã–π –ø—É—Ç—å.

–í —ç—Ç–æ–º –≥–æ–¥—É –≤–µ–ª–∏–∫–∏–π –¥–µ–Ω—å –ø—Ä–∏—à–µ–ª—Å—è –Ω–∞ –≤–µ—á–µ—Ä 21 —è–Ω–≤–∞—Ä—è, –Ω–æ  –≤—Å—ë –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫... """

story_part_2 = """–ú–∏—Ä –ë–ª–∞–∂–µ–Ω—Å—Ç–≤–∞ –∑–∞—Ç—è–Ω—É–ª–æ —Å–µ—Ä—ã–º —Ç—É–º–∞–Ω–æ–º –ó–∞–±–≤–µ–Ω–∏—è. –õ—é–¥–∏ –ø–µ—Ä–µ—Å—Ç–∞–ª–∏ –≤–∏–¥–µ—Ç—å –º–µ—á—Ç—ã, –∑–∞–±—ã–ª–∏, –∫—Ç–æ –æ–Ω–∏, –∑–∞—á–µ–º –ø—Ä–∏—à–ª–∏ –∏ –≤ —á—ë–º –∏—Ö –¥–∞—Ä. –û–Ω–∏ –±—Ä–æ–¥–∏–ª–∏ –≤ —Ç–∏—à–∏–Ω–µ, —Å–ª–æ–≤–Ω–æ –∏—Ö –¥—É—à–∏ –æ–∫—É—Ç–∞–ª —Å–æ–Ω.

–°–∫–æ—Ä–±–Ω–∏—Ü–∞ –í—Ä–µ–º–µ–Ω–∏ –∑–Ω–∞–ª–∞: –µ—Å–ª–∏ –ª—é–¥–∏ —É—Ç—Ä–∞—Ç—è—Ç —Å–≤—è–∑—å —Å–æ —Å–≤–æ–∏–º–∏ –ì–µ–Ω–Ω—ã–º–∏ –ö–ª—é—á–∞–º–∏, –µ—Å–ª–∏ –ø–µ—Ä–µ—Å—Ç–∞–Ω—É—Ç –º–µ—á—Ç–∞—Ç—å, –æ—Å–æ–∑–Ω–∞–≤–∞—Ç—å –∏ —Å–ª–µ–¥–æ–≤–∞—Ç—å —Å–≤–æ–µ–π –ò—Å—Ç–∏–Ω–µ, –æ–Ω–∞ –ø–æ–ª—É—á–∏—Ç –≤–ª–∞—Å—Ç—å –Ω–∞–¥ –º–∏—Ä–æ–º. –ü–æ—ç—Ç–æ–º—É –æ–Ω–∞ –≤–ø–ª–µ–ª–∞ –≤ –∏—Ö —Å–æ–∑–Ω–∞–Ω–∏–µ —Å–æ–º–Ω–µ–Ω–∏—è, —Ç—Ä–µ–≤–æ–≥–∏, —É—Å—Ç–∞–ª–æ—Å—Ç—å –∏ —Å—Ç—Ä–∞—Ö, –ø—Ä–µ–≤—Ä–∞—Ç–∏–≤ –∏—Ö –º–µ—á—Ç—ã –≤ –∏–ª–ª—é–∑–∏–∏. –õ—é–¥–∏ –±–ª—É–∂–¥–∞–ª–∏ –≤ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ñ–∞–Ω—Ç–∞–∑–∏—è—Ö, —Å–æ–∑–¥–∞–≤–∞—è —Å–µ–±–µ –ø—Ä–µ–≥—Ä–∞–¥—ã, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–æ, –∏ —É–±–µ–∂–¥–∞—è —Å–µ–±—è, —á—Ç–æ –Ω–µ –º–æ–≥—É—Ç –Ω–∞—á–∞—Ç—å, —á—Ç–æ –Ω–µ –≤—Ä–µ–º—è, —á—Ç–æ –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è.

–¢–µ–ø–µ—Ä—å –≤–µ—Å—å –º–∏—Ä –±—Ä–æ–¥–∏–ª –≤–æ —Å–Ω–µ, –Ω–µ –≤–∏–¥—è –ø—É—Ç–µ–π –∫ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—é.

–í—Ä–∞—Ç–∞ –ù–æ–≤–æ–≥–æ –¶–∏–∫–ª–∞ –æ—Ç–∫—Ä—ã–ª–∏—Å—å, –Ω–æ –Ω–∏–∫—Ç–æ –Ω–µ –≤–æ—à–µ–ª –≤ –Ω–∏—Ö.

–ù–æ –æ–¥–Ω–∞ –º–∞–ª—ã—à–∫–∞ –æ–∫–∞–∑–∞–ª–∞—Å—å –°–∫–æ—Ä–±–Ω–∏—Ü–µ –Ω–µ –ø–æ –∑—É–±–∞–º...."""

story_part_3 = """üëë –¶–∞—Ä–µ–≤–Ω–∞ –ë–ª–∞–∂–µ–Ω–∞ —á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∞: –ö–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–æ –º–æ–∂–Ω–æ —Å–ø–∞—Å—Ç–∏! ‚ú®

–° –Ω–µ–π –±—ã–ª–∞ –µ–µ –Ω–∞—Å—Ç–∞–≤–Ω–∏—Ü–∞ –î–∞—Ä–∏ ‚Äî –°–∫–∞–∑–æ—á–Ω–∏—Ü–∞, –ü–ª–µ—Ç—É—â–∞—è –ù–∏—Ç–∏ –†–µ–∞–ª—å–Ω–æ—Å—Ç–∏. –û–Ω–∞ –∑–Ω–∞–ª–∞, –∫–∞–∫ –æ–∂–∏–≤–∏—Ç—å –∑–∞–±—ã—Ç—ã–µ –º–µ—á—Ç—ã –∏ –≤–µ—Ä–Ω—É—Ç—å –ª—é–¥—è–º –∏—Ö –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ. –ï—ë —Å–ª–æ–≤–∞ –ø—Ä–æ–±—É–∂–¥–∞–ª–∏, –∞ –∏—Å—Ç–æ—Ä–∏–∏ –≤–ø–ª–µ—Ç–∞–ª–∏ –≤ —Å–µ—Ä–¥—Ü–∞ –æ–≥–æ–Ω—å –∏—Å—Ç–∏–Ω–Ω–æ–≥–æ –ø—É—Ç–∏.

‚Äî –ù–∞–º –Ω—É–∂–Ω–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ö—Ä–∏—Å—Ç–∞–ª–ª –ü—Ä–æ–±—É–∂–¥–µ–Ω–∏—è!¬†‚Äî –≤–æ—Å–∫–ª–∏–∫–Ω—É–ª–∞ —é–Ω–∞—è –¶–∞—Ä–µ–≤–Ω–∞.

‚Äî –î–∞, –Ω–æ –æ–Ω –¥–µ–π—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª—é–¥–µ–π –ø–æ–º–Ω–∏—Ç —Å–µ–±—è... ‚Äî –∑–∞–¥—É–º—á–∏–≤–æ —Å–∫–∞–∑–∞–ª–∞ –î–∞—Ä–∏.

üî• –¢—ã –Ω—É–∂–µ–Ω –Ω–∞–º! üî•"""

mission_text = """üìú –¢–≤–æ—è –ø–µ—Ä–≤–∞—è –º–∏—Å—Å–∏—è: ‚ú® –ø–µ—Ä–µ–¥–∞–π –ò—Å–∫—Ä—É –¥—Ä—É–≥–æ–º—É! ‚ú®

üåû –ö–∞–∫ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å?

1Ô∏è‚É£ –ü–æ–¥–µ–ª–∏—Å—å —ç—Ç–∏–º —Å–≤–∏—Ç–∫–æ–º –≤ —Å–æ—Ü—Å–µ—Ç—è—Ö (Instagram, Telegram, —á–∞—Ç—ã, –±–ª–æ–≥–∏) ‚Äî –∏–ª–∏ –ø—Ä–∏–≥–ª–∞—Å–∏ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞ –≤ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –ª–∏—á–Ω–æ.

–¢–æ—Ç, –∫—Ç–æ —Å–ø–∏—Ç, –Ω–µ —Å–º–æ–∂–µ—Ç –ø—Ä–æ–±—É–¥–∏—Ç—å –ö–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–æ.

3Ô∏è‚É£ –ü—Ä–∏—à–ª–∏ —Å–∫—Ä–∏–Ω –≤ –±–æ—Ç–∞ —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º ‚Äî –∏ –≤—Ä–∞—Ç–∞ –ü–æ—Ä—Ç–∞–ª–∞ –æ—Ç–∫—Ä–æ—é—Ç—Å—è –ø–µ—Ä–µ–¥ —Ç–æ–±–æ–π.

üí° –ß–µ–º –±–æ–ª—å—à–µ –ª—é–¥–µ–π —É–≤–∏–¥—è—Ç —Å–≤–µ—Ç –°–≤–∏—Ç–∫–∞, —Ç–µ–º –±—ã—Å—Ç—Ä–µ–µ —Ä–∞—Å—Ç–∞–µ—Ç –¢—É–º–∞–Ω –ó–∞–±–≤–µ–Ω–∏—è!

‚ö° –¶–∏–∫–ª —É–∂–µ –∑–∞–ø—É—â–µ–Ω, –í—Ä–µ–º—è —É—Ö–æ–¥–∏—Ç! ‚è≥
–¢—ã –≥–æ—Ç–æ–≤ —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ—ë –±—É–¥—É—â–µ–µ?"""

portal_text = "üîÆ –ü–æ—Ä—Ç–∞–ª –æ—Ç–∫—Ä—ã—Ç! –í–æ—Ç —Ç–≤–æ—è —Å—Å—ã–ª–∫–∞"

# üîπ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ –∏ —Å–æ–æ–±—â–µ–Ω–∏–π
@dp.message(Command("start"))
async def start_command(message: Message):
    await message.answer(story_part_1, reply_markup=kb_what_happened)

@dp.message()
async def handle_message(message: Message):
    if message.text == "–ß—Ç–æ –∂–µ —Å–ª—É—á–∏–ª–æ—Å—å?":
        await message.answer(story_part_2, reply_markup=kb_who_is_she)
    elif message.text == "–ö—Ç–æ –∂–µ –æ–Ω–∞?":
        await message.answer(story_part_3, reply_markup=kb_how_help)
    elif message.text == "–ß–µ–º —è –º–æ–≥—É –ø–æ–º–æ—á—å?":
        # üîπ –ó–¥–µ—Å—å —É–¥–∞–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ –ø–æ—Å–ª–µ –∑–∞–ø—Ä–æ—Å–∞ —Ñ–æ—Ç–æ
        await message.answer(mission_text, reply_markup=ReplyKeyboardRemove())
    elif message.photo:  # –ß–µ–ª–æ–≤–µ–∫ –æ—Ç–ø—Ä–∞–≤–∏–ª —Ñ–æ—Ç–æ (—Å–∫—Ä–∏–Ω)
        await message.answer(portal_text, reply_markup=portal_button)

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
async def main():
    logging.basicConfig(level=logging.INFO)
    await dp.start_polling(bot)

if __name__ == "__main__":
    asyncio.run(main())
